/* [1] 기본 레이아웃 */
#minigame-overlay {
    font-family: 'Pretendard', sans-serif;
    text-align: center;
    margin: 0;
    padding: 0;
    display: none;
    position: fixed !important;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 10000;
    background-color: white; 
}





#minigame-overlay .swiper {
    width: 100%;
    height: 100%;
}

#minigame-overlay .game-screen {
    width: 100%;
    height: 100%;
    position: relative;
    /* 하늘 색상 */
    background:  #e4f0f9 100%;
    overflow: hidden;
}



#minigame-overlay .wave-canvas {
    position: absolute;
    width: 200.5% !important; /* 반복을 위해 2배 너비 */
    height: 100%; /* 파도 높이 영역 */
    background-position: left top !important; /* center 대신 left */
    background-repeat: repeat-x;
    shape-rendering: crispEdges; 
    
    /* 크롬/사파리 브라우저 오차 보정 */
    -webkit-transform: translateZ(0)

}




/* SVG 패턴 설명: 
   - 촘촘하고 작은 파도를 위해 곡선(C)을 여러 번 반복한 경로를 사용했습니다. 
   - fill='%23...' 부분은 색상 코드입니다 (# 대신 %23 사용)
*/
#minigame-overlay .wave-canvas.-one { 
    background-image: url("images/sea_wave.svg");
    
    /* 1. 박스의 실제 키를 부모(.wave-background) 높이만큼 꽉 채우기 */
    height: 110% !important; 
    
    /* 2. 이미지를 그 박스 높이에 맞춰서 100% 늘리기 */
    background-size: 300px 100%; 
    
    /* 3. 위쪽 경계선이 잘린다면 마이너스 값을 줘서 위로 올리기 */
    top: 135px; 
    
    position: absolute;
    width: 200%;
    animation: wave-move 30s linear infinite;
    opacity: 0.8;
    z-index: 10;
}
#minigame-overlay .wave-canvas.-two { 
    background-image: url("images/sea_wave.svg");
    height: 110% !important; 
    background-size: 300px 100%; 
    
    /* 1. 위치: -one(80px)보다 조금 더 위로 올림 */
    top: 160px; 
    
    position: absolute;
    width: 200%;
    
    /* 2. 애니메이션: 속도를 20s로 올리고 방향을 반대로(reverse) */
    animation: wave-move 25s linear infinite reverse; 
    
    /* 3. 색상: filter를 써서 -one보다 조금 더 진한 파랑으로 변신 */
    filter: brightness(0.7) contrast(1.2); 
    
    opacity: 0.9;
    z-index: 205; /* -one(10)보다 뒤로 보낼지 앞으로 보낼지 결정 (현재는 뒤) */
}

#minigame-overlay .wave-canvas.-three { 
    background-image: url("images/sea_wave.svg"); /* 1, 2번과 동일 이미지 확인 */
    
    /* [해결 1] 300px 대신 301px로 아주 살짝 키워 옆 칸을 덮습니다 */
    background-size: 301px 100% !important; 
    
    /* [해결 2] 역방향 오차를 대비해 가로폭을 더 넉넉히(201%) 잡습니다 */
    width: 201% !important;
    
    /* [해결 3] 파도 색상과 똑같은 그림자를 양옆에 0.5px씩 붙여 틈을 메웁니다 */
    box-shadow: -0.5px 0 0 #1A73E8, 0.5px 0 0 #1A73E8;

    animation: wave-move 33s linear infinite reverse; 
    
    /* 필터를 유지하되 하드웨어 가속을 붙여 렌더링을 선명하게 합니다 */
    filter: brightness(0.7) contrast(1.2);
    transform: translateZ(0); 
    
    top: 180px; 
    position: absolute;
    opacity: 0.7;
    z-index: 250; 
}


/* [3] 배와 낚시 시스템 */
#minigame-overlay .boat-container {
    position: absolute;
    top: 45%;
    left: 50%;
    transform: translate(-50%, -90%);
    width: 480px;
    height: 320px;
    z-index: 150;
    animation: boat-physics-bobbing 3.5s cubic-bezier(0.445, 0.05, 0.55, 0.95) infinite;
}

#minigame-overlay .boat {
    position: absolute; bottom: 0; width: 100%; height: 100px;
    background-color: #894F1C; border: 4px solid #5d3513;
    clip-path: polygon(0% 0%, 100% 0%, 85% 100%, 15% 100%);
}

#minigame-overlay .fisherman {
    position: absolute;
    bottom: 90px;
    left: 50%;
    z-index: -1; 
}

#minigame-overlay .fisherman img {
    width: 100% !important;
    height: auto !important;
    display: block;
}

/* 어부 스타일별 위치 정렬 */
#minigame-overlay .fish-style-0 { bottom: 40px; width: 250px !important; transform: translate(calc(-50% + 145px), 0px); }
#minigame-overlay .fish-style-1 { bottom: 40px; width: 280px !important; transform: translate(calc(-50% + 160px), 0px); }
#minigame-overlay .fish-style-2 { bottom: 40px; width: 280px !important; transform: translate(calc(-50% + 160px), 0px); }

/* 낚싯줄 설정 */
#minigame-overlay .fishing-line {
    position: absolute; 
    width: 3px;
    background: #fff; 
    height: 150px;
    transition: height 0.6s ease-in-out;
    z-index: 60;
}
#minigame-overlay .line-style-0 { right: -30px; top: 55px; }
#minigame-overlay .line-style-1 { right: -60px; top: 85px; }
#minigame-overlay .line-style-2 { right: -60px; top: 90px; }

#minigame-overlay .fish {
    position: absolute; 
    bottom: -35px; 
    left: -20px; 
    display: none;
    font-size: 2.5rem;
    animation: struggle 0.2s infinite;
    z-index: 71;
}

#minigame-overlay .float {
    position: absolute;
    bottom: -15px; 
    left: 50%;
    transform: translateX(-50%);
    font-size: 1.2rem;
    z-index: 70;
}

/* 기록창 */
#minigame-overlay .team-info {
    position: absolute; top: 30px; left: 40px; text-align: left; z-index: 300;
}
#minigame-overlay .record-box {
    background: rgba(255, 255, 255, 0.9); border: 4px solid #333;
    padding: 20px; min-width: 250px; min-height: 150px;
    margin-top: 15px; font-size: 1.5rem; border-radius: 10px;
}

/* 결과 오버레이 */
#game-result-overlay {
    display: none; 
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 20000;
    background: white;
    padding: 30px;
    border-radius: 15px;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.game-over-btn{
    margin-top: 20%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 5px 12px !important;
}

/* 카카오 버튼 전용 스타일 보정 */
.kakao-share-btn {
    background-color: #FEE500 !important;
    margin-top: 20%;
    color: #191919 !important;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 5px;
}

/* [4] 애니메이션 */
/* 수평 이동 파도 (좌우 반복) */
@keyframes wave-move {
    from { transform: translateX(0); }
    to { transform: translateX(-50%); }
}

@keyframes struggle { 
    0% { transform: rotate(-10deg); } 
    100% { transform: rotate(10deg); } 
}

@keyframes boat-physics-bobbing { 
    0%, 100% { transform: translate(-50%, -88%) rotate(-0.8deg); }
    50% { transform: translate(-50%, -96%) rotate(1.5deg); } 
}